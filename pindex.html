<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ù…Ø¹Ø¯Ù„</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #0d1117;
    --card: #161b22;
    --border: #30363d;
    --accent: #58a6ff;
    --accent2: #3fb950;
    --accent3: #f78166;
    --text: #e6edf3;
    --muted: #8b949e;
    --input-bg: #0d1117;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Cairo', sans-serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
    padding: 2rem 1rem;
    background-image: radial-gradient(ellipse at top, #1a2a4a 0%, transparent 60%),
                      radial-gradient(ellipse at bottom right, #0a1f10 0%, transparent 50%);
  }

  .container {
    max-width: 900px;
    margin: 0 auto;
  }

  header {
    text-align: center;
    margin-bottom: 2.5rem;
    animation: fadeDown 0.6s ease;
  }

  header h1 {
    font-size: 2.8rem;
    font-weight: 900;
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 0.3rem;
  }

  header p {
    color: var(--muted);
    font-size: 0.95rem;
  }

  .grid {
    display: grid;
    grid-template-columns: 1fr 340px;
    gap: 1.5rem;
    align-items: start;
  }

  @media (max-width: 700px) {
    .grid { grid-template-columns: 1fr; }
    header h1 { font-size: 2rem; }
  }

  .card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 1.5rem;
    animation: fadeUp 0.6s ease;
  }

  .card h2 {
    font-size: 1rem;
    font-weight: 700;
    color: var(--accent);
    margin-bottom: 1.2rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .card h2::before {
    content: '';
    display: inline-block;
    width: 4px;
    height: 18px;
    background: var(--accent);
    border-radius: 4px;
  }

  /* Table */
  .table-wrap { overflow-x: auto; }
  table { width: 100%; border-collapse: collapse; }

  thead th {
    padding: 0.7rem 0.5rem;
    font-size: 0.8rem;
    color: var(--muted);
    text-align: center;
    border-bottom: 1px solid var(--border);
    white-space: nowrap;
  }

  thead th:first-child { min-width: 120px; }
  thead th:nth-child(2), thead th:nth-child(3) { min-width: 60px; }

  tbody tr {
    border-bottom: 1px solid rgba(48,54,61,0.5);
    transition: background 0.2s;
  }
  tbody tr:hover { background: rgba(88,166,255,0.04); }

  tbody td { padding: 0.4rem 0.3rem; text-align: center; }

  input[type="text"], input[type="number"] {
    background: var(--input-bg);
    border: 1px solid var(--border);
    color: var(--text);
    border-radius: 8px;
    padding: 0.45rem 0.6rem;
    font-family: 'Cairo', sans-serif;
    font-size: 0.85rem;
    width: 100%;
    text-align: center;
    transition: border-color 0.2s, box-shadow 0.2s;
    outline: none;
  }

  input[type="text"] { text-align: right; min-width: 110px; }

  input:focus {
    border-color: var(--accent);
    box-shadow: 0 0 0 3px rgba(88,166,255,0.15);
  }

  .grade-display {
    font-size: 0.85rem;
    font-weight: 700;
    padding: 0.3rem 0.6rem;
    border-radius: 6px;
    min-width: 36px;
    display: inline-block;
  }

  .points-display {
    font-size: 0.85rem;
    color: var(--muted);
  }

  /* Results */
  .results-card { animation: fadeUp 0.7s ease; }

  .result-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.9rem 1rem;
    border-radius: 10px;
    margin-bottom: 0.8rem;
    background: rgba(255,255,255,0.03);
    border: 1px solid var(--border);
  }

  .result-label {
    font-size: 0.85rem;
    color: var(--muted);
  }

  .result-value {
    font-size: 1.3rem;
    font-weight: 900;
  }

  .big-result {
    text-align: center;
    padding: 1.5rem;
    border-radius: 14px;
    margin-bottom: 1rem;
    background: linear-gradient(135deg, rgba(88,166,255,0.1), rgba(63,185,80,0.1));
    border: 1px solid rgba(88,166,255,0.3);
    position: relative;
    overflow: hidden;
  }

  .big-result::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, rgba(88,166,255,0.05), transparent);
    pointer-events: none;
  }

  .big-result .label {
    font-size: 0.9rem;
    color: var(--muted);
    margin-bottom: 0.4rem;
  }

  .big-result .value {
    font-size: 3.5rem;
    font-weight: 900;
    line-height: 1;
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .big-result .grade-letter {
    font-size: 1.4rem;
    font-weight: 700;
    margin-top: 0.3rem;
  }

  /* Previous GPA */
  .prev-section {
    margin-top: 1rem;
    padding-top: 1rem;
    border-top: 1px solid var(--border);
  }

  .input-row {
    display: flex;
    flex-direction: column;
    gap: 0.7rem;
  }

  .input-group {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.8rem;
  }

  .input-group label {
    font-size: 0.82rem;
    color: var(--muted);
    white-space: nowrap;
    flex-shrink: 0;
  }

  .input-group input {
    max-width: 100px;
  }

  .cumulative-result {
    margin-top: 1rem;
    text-align: center;
    padding: 1rem;
    border-radius: 12px;
    background: linear-gradient(135deg, rgba(247,129,102,0.1), rgba(88,166,255,0.1));
    border: 1px solid rgba(247,129,102,0.3);
  }

  .cumulative-result .label { font-size: 0.8rem; color: var(--muted); }
  .cumulative-result .value {
    font-size: 2.5rem;
    font-weight: 900;
    color: var(--accent3);
  }

  /* Grade color classes */
  .A-plus { color: #3fb950; background: rgba(63,185,80,0.15); }
  .A      { color: #58a6ff; background: rgba(88,166,255,0.15); }
  .B-plus { color: #a5d6ff; background: rgba(165,214,255,0.12); }
  .B      { color: #d2a8ff; background: rgba(210,168,255,0.15); }
  .C-plus { color: #ffa657; background: rgba(255,166,87,0.15); }
  .C      { color: #f0b429; background: rgba(240,180,41,0.15); }
  .D-plus { color: #f78166; background: rgba(247,129,102,0.15); }
  .D      { color: #ff7b72; background: rgba(255,123,114,0.15); }
  .F      { color: #ff6369; background: rgba(255,99,105,0.2); }
  .none   { color: var(--muted); background: transparent; }

  /* Add/remove rows */
  .btn {
    background: none;
    border: 1px dashed var(--border);
    color: var(--muted);
    border-radius: 8px;
    padding: 0.5rem 1rem;
    cursor: pointer;
    font-family: 'Cairo', sans-serif;
    font-size: 0.85rem;
    width: 100%;
    margin-top: 0.7rem;
    transition: all 0.2s;
  }

  .btn:hover { border-color: var(--accent); color: var(--accent); background: rgba(88,166,255,0.05); }

  .remove-btn {
    background: none;
    border: none;
    color: var(--border);
    cursor: pointer;
    font-size: 1rem;
    padding: 0 4px;
    transition: color 0.2s;
  }
  .remove-btn:hover { color: var(--accent3); }

  @keyframes fadeDown {
    from { opacity: 0; transform: translateY(-20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .hint { font-size: 0.75rem; color: var(--muted); text-align: center; margin-top: 0.5rem; }

  footer {
    text-align: center;
    margin-top: 2.5rem;
    padding: 1.2rem;
    border-top: 1px solid var(--border);
    color: var(--muted);
    font-size: 0.85rem;
    animation: fadeUp 0.8s ease;
  }

  footer span {
    color: var(--accent);
    font-weight: 700;
  }
</style>
</head>
<body>
<div class="container">
  <header>
    <h1>ğŸ“ Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ù…Ø¹Ø¯Ù„</h1>
    <p>Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…ÙˆØ§Ø¯ ÙˆØ§Ù„Ø¯Ø±Ø¬Ø§Øª Ù„Ø­Ø³Ø§Ø¨ Ù…Ø¹Ø¯Ù„Ùƒ Ø§Ù„ÙØµÙ„ÙŠ ÙˆØ§Ù„ØªØ±Ø§ÙƒÙ…ÙŠ</p>
  </header>

  <div class="grid">
    <!-- Table -->
    <div class="card">
      <h2>Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©</h2>
      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th>Ø§Ù„Ù…Ø§Ø¯Ø©</th>
              <th>Ø§Ù„Ø¯Ø±Ø¬Ø© %</th>
              <th>Ø§Ù„Ø³Ø§Ø¹Ø§Øª</th>
              <th>Ø§Ù„ØªÙ‚Ø¯ÙŠØ±</th>
              <th>Ø§Ù„Ù†Ù‚Ø§Ø·</th>
              <th></th>
            </tr>
          </thead>
          <tbody id="courses-body"></tbody>
        </table>
      </div>
      <button class="btn" onclick="addRow()">+ Ø¥Ø¶Ø§ÙØ© Ù…Ø§Ø¯Ø©</button>
      <p class="hint">Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¯Ø±Ø¬Ø© ÙƒÙ†Ø³Ø¨Ø© Ù…Ø¦ÙˆÙŠØ© (0-100)</p>
    </div>

    <!-- Results -->
    <div class="card results-card">
      <h2>Ø§Ù„Ù†ØªØ§Ø¦Ø¬</h2>

      <div class="big-result">
        <div class="label">Ø§Ù„Ù…Ø¹Ø¯Ù„ Ø§Ù„ÙØµÙ„ÙŠ</div>
        <div class="value" id="gpa-value">â€”</div>
        <div class="grade-letter" id="gpa-letter"></div>
      </div>

      <div class="result-item">
        <span class="result-label">Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ù…Ø¹ØªÙ…Ø¯Ø©</span>
        <span class="result-value" id="total-hours" style="color: var(--accent)">0</span>
      </div>
      <div class="result-item">
        <span class="result-label">Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ù†Ù‚Ø§Ø·</span>
        <span class="result-value" id="total-points" style="color: var(--accent2)">0</span>
      </div>

      <!-- Cumulative -->
      <div class="prev-section">
        <div style="font-size:0.85rem; color: var(--muted); margin-bottom: 0.8rem;">Ø§Ù„Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</div>
        <div class="input-row">
          <div class="input-group">
            <label>Ù…Ø¹Ø¯Ù„Ùƒ Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠ Ø§Ù„Ø³Ø§Ø¨Ù‚</label>
            <input type="number" id="prev-gpa" min="0" max="4" step="0.01" placeholder="0.00" oninput="calculate()">
          </div>
          <div class="input-group">
            <label>Ø³Ø§Ø¹Ø§Øª Ø¯Ø±Ø³ØªÙ‡Ø§ Ø³Ø§Ø¨Ù‚Ø§Ù‹</label>
            <input type="number" id="prev-hours" min="0" step="1" placeholder="0" oninput="calculate()">
          </div>
        </div>
        <div class="cumulative-result" id="cumulative-section" style="display:none">
          <div class="label">Ù…Ø¹Ø¯Ù„Ùƒ Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹</div>
          <div class="value" id="cum-gpa">â€”</div>
        </div>
      </div>
    </div>
  </div>
</div>

<footer>
  Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ù…Ù„ÙƒÙŠØ© Ø§Ù„ÙÙƒØ±ÙŠØ© Â© <span>Ø¯. Ø³Ø§Ù„Ù… Ø¨Ù† Ø³Ø¹ÙŠØ¯ Ø§Ù„Ø­Ø§Ø±Ø«ÙŠ</span>
</footer>

<script>
// Ø§Ù„Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ§Øª Ù…Ø£Ø®ÙˆØ°Ø© Ù…Ø¨Ø§Ø´Ø±Ø© Ù…Ù† Ù…Ù„Ù Excel Ø¯. Ø³Ø§Ù„Ù… Ø§Ù„Ø­Ø§Ø±Ø«ÙŠ
const gradeMap = [
  { min: 95, letter: 'Ø£',   points: 4.0  },
  { min: 90, letter: 'Ø£-',  points: 3.7  },
  { min: 87, letter: 'Ø¨+',  points: 3.3  },
  { min: 83, letter: 'Ø¨',   points: 3.0  },
  { min: 80, letter: 'Ø¨-',  points: 2.7  },
  { min: 77, letter: 'Ø¬+',  points: 2.3  },
  { min: 73, letter: 'Ø¬',   points: 2.0  },
  { min: 70, letter: 'Ø¬-',  points: 1.7  },
  { min: 65, letter: 'Ø¯+',  points: 1.3  },
  { min: 60, letter: 'Ø¯',   points: 1.0  },
  { min: 0,  letter: 'Ù‡Ù€',  points: 0.0  },
];

function getGrade(score) {
  if (score === '' || score === null || isNaN(score)) return null;
  for (const g of gradeMap) {
    if (score >= g.min) return g;
  }
  return gradeMap[gradeMap.length - 1];
}

function gradeClass(letter) {
  if (!letter) return 'none';
  const map = {
    'Ø£': 'A', 'Ø£-': 'A', 'Ø¨+': 'B-plus', 'Ø¨': 'B',
    'Ø¨-': 'B', 'Ø¬+': 'C-plus', 'Ø¬': 'C', 'Ø¬-': 'C',
    'Ø¯+': 'D-plus', 'Ø¯': 'D', 'Ù‡Ù€': 'F'
  };
  return map[letter] || 'none';
}

let rows = [];

function addRow() {
  const id = Date.now();
  rows.push(id);
  renderRows();
}

function removeRow(id) {
  rows = rows.filter(r => r !== id);
  renderRows();
  calculate();
}

function renderRows() {
  const tbody = document.getElementById('courses-body');
  tbody.innerHTML = '';
  rows.forEach((id, i) => {
    const tr = document.createElement('tr');
    tr.id = 'row-' + id;
    tr.innerHTML = `
      <td><input type="text" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø§Ø¯Ø©" id="name-${id}"></td>
      <td><input type="number" min="0" max="100" placeholder="â€”" id="score-${id}" oninput="calculate()"></td>
      <td><input type="number" min="1" max="6" placeholder="3" id="hours-${id}" value="3" oninput="calculate()"></td>
      <td><span class="grade-display none" id="letter-${id}">â€”</span></td>
      <td><span class="points-display" id="pts-${id}">â€”</span></td>
      <td><button class="remove-btn" onclick="removeRow(${id})">âœ•</button></td>
    `;
    tbody.appendChild(tr);
  });
  calculate();
}

function calculate() {
  let totalHours = 0, totalPoints = 0;

  rows.forEach(id => {
    const score = parseFloat(document.getElementById('score-' + id)?.value);
    const hours = parseFloat(document.getElementById('hours-' + id)?.value) || 0;
    const grade = getGrade(score);
    const letterEl = document.getElementById('letter-' + id);
    const ptsEl = document.getElementById('pts-' + id);

    if (grade && hours > 0 && !isNaN(score)) {
      letterEl.textContent = grade.letter;
      letterEl.className = 'grade-display ' + gradeClass(grade.letter);
      ptsEl.textContent = (grade.points * hours).toFixed(2);
      totalHours += hours;
      totalPoints += grade.points * hours;
    } else {
      if (letterEl) { letterEl.textContent = 'â€”'; letterEl.className = 'grade-display none'; }
      if (ptsEl) ptsEl.textContent = 'â€”';
    }
  });

  document.getElementById('total-hours').textContent = totalHours;
  document.getElementById('total-points').textContent = totalPoints.toFixed(2);

  const gpaEl = document.getElementById('gpa-value');
  const letterEl = document.getElementById('gpa-letter');

  if (totalHours > 0) {
    const gpa = totalPoints / totalHours;
    gpaEl.textContent = gpa.toFixed(2);
    const g = getGrade(gpa / 4 * 100);
    if (g) {
      letterEl.textContent = g.letter;
      letterEl.style.color = getComputedStyle(document.documentElement).getPropertyValue('--accent');
    }
  } else {
    gpaEl.textContent = 'â€”';
    letterEl.textContent = '';
  }

  // Cumulative
  const prevGPA = parseFloat(document.getElementById('prev-gpa').value);
  const prevHours = parseFloat(document.getElementById('prev-hours').value) || 0;
  const cumSection = document.getElementById('cumulative-section');

  // Ù…Ø¹Ø§Ø¯Ù„Ø© Ù…Ø·Ø§Ø¨Ù‚Ø© Ù„Ù„Ù…Ù„Ù: =((I11*I10)+I3)/(I2+I11)
  // I10 = Ø§Ù„Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠ Ø§Ù„Ø³Ø§Ø¨Ù‚, I11 = Ø§Ù„Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©, I3 = Ù…Ø¬Ù…ÙˆØ¹ Ù†Ù‚Ø§Ø· Ø§Ù„ÙØµÙ„, I2 = Ø³Ø§Ø¹Ø§Øª Ø§Ù„ÙØµÙ„
  const denominator = totalHours + prevHours;
  if (!isNaN(prevGPA) && !isNaN(prevHours) && denominator > 0 && totalHours > 0) {
    const cumGPA = ((prevHours * prevGPA) + totalPoints) / denominator;
    document.getElementById('cum-gpa').textContent = cumGPA.toFixed(2);
    cumSection.style.display = 'block';
  } else {
    cumSection.style.display = 'none';
  }
}

// Initialize with 5 rows
for (let i = 0; i < 5; i++) addRow();
</script>
</body>
</html>
